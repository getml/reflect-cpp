name: test

on: [ push, pull_request ]

jobs:
  windows-msvc:
    runs-on: windows-latest
    steps:
      - uses: actions/checkout@v3
        with:
          submodules: true
      - uses: ilammy/msvc-dev-cmd@v1
      - uses: lukka/run-vcpkg@v11
      - name: Run test
        run: |
          cmake -S . -B build -DREFLECTCPP_BUILD_TESTS=ON 
          cmake --build build --config Release -j4 
          .\build\tests\json\Release\reflect-cpp-json-tests.exe
